(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4279735e"],{1e3:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"detail"}},[i("van-overlay",{staticClass:"loadBox",attrs:{show:t.load,"z-index":1e4,"lock-scroll":!0}},[t.load?i("van-loading",{staticClass:"load",attrs:{type:"spinner",color:"#1989fa",vertical:!0}}):t._e()],1),i("div",{staticClass:"content"},[i("div",{staticClass:"imgBox"},[i("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3}},t._l(t.data.acImages,(function(t,s){return i("van-swipe-item",{key:s},[i("img",{attrs:{src:t,alt:""}})])})),1)],1),i("div",{staticClass:"videoBaseInfo"},[i("div",{staticClass:"videoTitle"},[i("p",{staticClass:"videoName"},[t._v(t._s(t.data.name))]),i("p",{staticClass:"videoSort"},t._l(t.data.tags,(function(s,e){return i("span",{key:e},[0!==e?i("span",[t._v("/")]):t._e(),t._v(" "+t._s(s)+" ")])})),0)]),i("div",{staticClass:"videoBrief"},[i("div",{class:{shrink:t.showToggleBtn&&t.showVideoBrief}},[i("div",{ref:"videoBriefText",staticClass:"videoBriefText",domProps:{innerHTML:t._s(t.introduction)}}),t.showToggleBtn&&t.showVideoBrief?i("div",{staticClass:"ellipsis"},[t._v("...")]):t._e()]),t.showToggleBtn?i("p",{staticClass:"changeBrief",on:{click:t.changeBrief}},[t._v(t._s(t.showVideoBrief?"展开":"收起"))]):t._e()]),i("div",{staticClass:"videoCom"},[i("div",{staticClass:"comLogo"},[i("img",{attrs:{src:t.data.logo,alt:""}})]),i("p",[t._v(t._s(t.data.studio_name))])]),i("div",{staticClass:"videoDetail",domProps:{innerHTML:t._s(t.data.intro)}}),i("div",{staticClass:"videoBuy"},[i("div",{staticClass:"toUser",on:{click:t.toUser}},[i("i",{staticClass:"iconfont icon-wode"}),i("span",[t._v("个人中心")])]),i("van-button",{staticClass:"buyBtn",attrs:{type:"primary",disabled:t.is_buy},on:{click:t.WXPay}},[t.is_buy?i("span",[t._v("已购买")]):i("span",[t._v(" 抢购价￥ "),i("span",[t._v(t._s(t.data.price))])])])],1),i("div",{staticClass:"shareBtn",on:{click:t.toShare}},[t._v(" 分享赚￥ "),i("span",[t._v(t._s(t.data.price*t.data.rate/100))])])])])],1)},a=[],o=(i("ac1f"),i("841c"),i("1276"),i("0a14")),n={data:function(){return{introduction:"",showToggleBtn:!1,showVideoBrief:!0,load:!1,getDataFlag:!0,data:{},is_buy:!1}},created:function(){var t=this.getUrlParam("ac_id"),s=this.getUrlParam("from_user_id");t&&s&&this.$store.commit("setDistributionInfo",{ac_id:t,from_user_id:s}),this.$store.state.distributionInfo.ac_id&&this.$store.state.distributionInfo.from_user_id?this.getData():this.$router.push("/errorPage"),console.log("shareConfig"),this.$shareConfig()},methods:{getUrlParam:function(t){for(var s=window.location.search.substr(1).split("&"),i=0;i<s.length;i++)if(s[i].split("=")[0]==t)return s[i].split("=")[1];return!1},getData:function(){var t=this;if(this.load=!0,this.getDataFlag){this.getDataFlag=!1;var s={ac_id:this.$store.state.distributionInfo.ac_id,user_id:this.$store.state.WXUserInfo.id};Object(o["d"])(s).then((function(s){console.log(s),t.data=s,t.introduction=s.introduction,t.is_buy=s.is_buy,t.load=!1,t.getDataFlag=!0}))}},WXPay:function(){var t=this;if(this.$store.state.WXUserInfo.id&&this.$store.state.appUserInfo.token){var s={ac_id:this.$store.state.distributionInfo.ac_id,from_user_id:this.$store.state.distributionInfo.from_user_id,user_id:this.$store.state.WXUserInfo.id,openid:this.$store.state.WXUserInfo.open_id};Object(o["i"])(s).then((function(s){console.log(s),t.$payConfig(s.timeStamp,s.nonceStr,s.package,s.signType,s.paySign,(function(){console.log("支付成功")}))}))}else this.$router.push("/login")},toUser:function(){this.$router.push({name:"personalCenter"})},toShare:function(){this.$router.push({name:"share"})},changeBrief:function(){this.showVideoBrief=!this.showVideoBrief}},watch:{introduction:function(){this.$nextTick((function(){var t=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).height),s=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).lineHeight);console.log(t,s),t>3*s?(console.log(1),this.showToggleBtn=!0):(console.log(2),this.showToggleBtn=!1)}))}}},r=n,c=(i("62cf"),i("2877")),d=Object(c["a"])(r,e,a,!1,null,"58a45377",null);s["default"]=d.exports},"62cf":function(t,s,i){"use strict";var e=i("f70e"),a=i.n(e);a.a},f70e:function(t,s,i){}}]);
//# sourceMappingURL=chunk-4279735e.d089537c.js.map