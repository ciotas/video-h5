(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-271a89ae"],{"057f":function(t,e,i){var o=i("fc6a"),a=i("241c").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(t){try{return a(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==n.call(t)?r(t):a(o(t))}},1e3:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"detail"}},[i("van-overlay",{staticClass:"loadBox",attrs:{show:t.load,"z-index":1e4,"lock-scroll":!0}},[t.load?i("van-loading",{staticClass:"load",attrs:{type:"spinner",color:"#1989fa",vertical:!0}}):t._e()],1),i("div",{staticClass:"content"},[i("div",{staticClass:"swiperBox"},[i("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3}},t._l(t.data.acImages,(function(t,e){return i("van-swipe-item",{key:e},[i("img",{attrs:{src:t,alt:""}})])})),1)],1),i("div",{staticClass:"tip"},[t._v(" 《亮剑》导演张前执导 CCTV-1黄金档同步热播 新时光全网独家 ")]),i("div",{staticClass:"videoBaseInfo"},[i("div",{staticClass:"videoTitle"},[i("div",{staticClass:"posterBox"},[i("img",{attrs:{src:t.data.poster_v,alt:""}})]),i("div",{staticClass:"rightBox"},[i("p",{staticClass:"videoName"},[t._v(t._s(t.data.name))]),i("p",[i("span",{staticClass:"episodes"},[t._v("共"+t._s(t.data.video_num)+"集")]),t._l(t.data.tags,(function(e,o){return i("span",{key:o},[0!==o?i("span",[t._v("/")]):t._e(),t._v(" "+t._s(e)+" ")])}))],2),i("p",[t._v("导演 ：")]),i("p",[t._v("领衔主演 ：")])])]),i("div",{staticClass:"videoBrief"},[i("div",{staticClass:"BriefBox",class:{shrink:t.showToggleBtn&&t.showVideoBrief}},[i("div",{ref:"videoBriefText",staticClass:"videoBriefText",domProps:{innerHTML:t._s(t.introduction)}}),t.showToggleBtn&&t.showVideoBrief?i("div",{staticClass:"ellipsis"},[t._v(" ... ")]):t._e()]),t.showToggleBtn?i("p",{staticClass:"changeBrief",on:{click:t.changeBrief}},[t._v(" "+t._s(t.showVideoBrief?"展开":"收起")+" ")]):t._e()]),t._m(0),i("div",{staticClass:"videoBuy"},[i("div",{staticClass:"price"},[i("span",{staticClass:"realPrice"},[t._v("￥"+t._s(t.data.real_price))]),i("span",{staticClass:"deletePrice"},[t._v("￥"+t._s(t.data.price))]),i("span",{staticClass:"rightMarker"},[t._v(t._s(t.data.video_num)+"集")])]),i("div",{staticClass:"tryWatch"},[i("wx-open-launch-weapp",{attrs:{id:"toWeapp",username:"gh_1653716eeae2",path:"/pages/videoDetail/videoDetail.html"},on:{error:t.handleWeappError,launch:t.handleWeappLaunch}},[[i("p",[t._v("免费试看")])]],2)],1),t.data.is_buy?i("div",{staticClass:"buyNow"},[t._v("已购买")]):i("div",{staticClass:"buyNow",on:{click:t.WXPay}},[t._v("立即抢购")])]),i("div",{staticClass:"shareBtn",on:{click:t.toShare}},[i("p",[t._v("邀请好友得")]),i("p",[i("span",[t._v(t._s(t.data.real_price*t.data.rate/100))]),t._v(" 元 ")])])])]),i("to-home",{attrs:{toWhere:"personalCenter"}}),t.showInviter?i("invite-login",{attrs:{showInviter:t.showInviter,from_user_id:t.from_user_id,ac_id:t.ac_id},on:{closeDialog:t.closeDialog}}):t._e()],1)},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"videoDetail"},[o("img",{attrs:{src:i("2bf4"),alt:""}})])}];i("ac1f"),i("5319"),i("841c"),i("1276"),i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var s=i("0a14"),r=i("8e0a"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"inviteLogin"}},[i("van-dialog",{class:{loginTrue:t.loginStatus},attrs:{"show-confirm-button":!1},scopedSlots:t._u([{key:"title",fn:function(){return[i("p",{staticClass:"avatar"},[i("img",{attrs:{src:t.dialogData.avatar,alt:""}})]),i("i",{staticClass:"closeBtn iconfont icon-guanbi3",on:{click:t.closeDialog}})]},proxy:!0}]),model:{value:t.showInviter,callback:function(e){t.showInviter=e},expression:"showInviter"}},[[i("div",{staticClass:"inviter"},[i("p",{staticClass:"name"},[t._v(t._s(t.dialogData.user_name))]),i("p",{staticClass:"tip"},[t._v(" 邀您1元看大剧《"+t._s(t.dialogData.program_name)+"》，重温乒乓王者路 ")])]),t.loginStatus?i("div",{staticClass:"btnBox"},[i("van-button",{attrs:{type:"info"},on:{click:t.closeDialog}},[t._v("确认")])],1):i("van-form",{ref:"formRef",staticClass:"formBox",on:{submit:t.login}},[i("van-cell-group",{staticClass:"formCell telBox"},[i("van-field",{attrs:{placeholder:"请输入手机号",rules:t.formRule.tel,error:!1,name:"tel",type:"number"},model:{value:t.formData.tel,callback:function(e){t.$set(t.formData,"tel",e)},expression:"formData.tel"}})],1),i("van-cell-group",{staticClass:"formCell codeBox"},[i("van-field",{attrs:{placeholder:"请输入验证码",rules:t.formRule.code,error:!1,name:"code",type:"number",maxlength:4},scopedSlots:t._u([{key:"button",fn:function(){return[i("van-button",{staticClass:"getCodeBtn",class:{notClick:!t.getCodeFlag},attrs:{round:"",block:"",type:"info","native-type":"button",disabled:!t.getCodeFlag},on:{click:t.getCode}},[t.intervalFlag?i("span",[t._v("("+t._s(t.times)+")")]):t._e(),t._v(" 获取验证码 ")])]},proxy:!0}],null,!1,1907922443),model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),i("van-cell-group",{staticClass:"formCell submitBox"},[i("van-button",{staticClass:"submitBtn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("接受邀请")])],1)],1)]],2)],1)},l=[],u={name:"inviteLogin",props:["showInviter","from_user_id","ac_id"],data:function(){var t=function(t,e){var i=/^\d+$|^\d+[.]?\d+$/;return i.test(t)&&4==t.length};return{loginStatus:!1,getCodeFlag:!0,loginFlag:!0,intervalFlag:!1,times:60,dialogData:{},formData:{tel:"",code:"",codeKey:""},formRule:{tel:[{required:!0,message:"手机号不可为空",trigger:"onChange"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确格式的手机号",trigger:"onChange"}],code:[{required:!0,message:"验证码不可为空",trigger:"onChange"},{validator:t,message:"验证码为长度为4的数字",trigger:"onChange"}]}}},created:function(){this.loginStatus=this.testToken(),this.getData()},methods:{getData:function(){var t=this,e={from_user_id:this.from_user_id,ac_id:this.ac_id};console.log(e),Object(s["e"])(e).then((function(e){console.log(e),t.dialogData=e.data}))},testToken:function(){if(this.$store.state.appUserInfo.token){var t=new Date(this.$store.state.appUserInfo.expired_at);t=t.getTime();var e=(new Date).getTime();return!(e>t)}return!1},closeDialog:function(){this.$emit("closeDialog")},getCode:function(){var t=this;this.$refs.formRef.validate("tel").then((function(e){if(t.getCodeFlag){t.getCodeFlag=!1;var i={mobile:t.formData.tel};Object(s["g"])(i).then((function(e){if(1e3==e.code){t.times=60,t.intervalFlag=!0;var i=t,o=setInterval((function(){i.times<=0&&(i.getCodeFlag=!0,i.intervalFlag=!1,clearInterval(o)),i.times--}),1e3);t.formData.codeKey=e.key,t.$toast({position:"top",message:"发送验证码成功!"})}else t.$toast({position:"top",message:e.message})}))}})).catch((function(t){console.log(t)}))},login:function(t){var e=this;if(this.formData.codeKey){if(!this.loginFlag)return;this.loginFlag=!1;var i={mobile:this.formData.tel,user_id:this.$store.state.WXUserInfo.id,verification_key:this.formData.codeKey,verification_code:this.formData.code,openid:this.$store.state.WXUserInfo.open_id};Object(s["a"])(i).then((function(t){if(console.log(t),e.loginFlag=!0,"success"==t.status){e.$store.commit("setAppUserInfo",{token:t.token,expired_at:t.expired_at,id:t.data.id});var i={ac_id:e.$store.state.distributionInfo.ac_id,user_id:t.data.id};Object(s["b"])(i).then((function(t){})),e.closeDialog()}else e.$toast({position:"top",message:t.message})}))}else this.$toast({position:"top",message:"请先获取验证码"})}}},f=u,d=(i("e548"),i("2877")),g=Object(d["a"])(f,c,l,!1,null,"37fca965",null),h=g.exports,p={components:{toHome:r["a"],inviteLogin:h},data:function(){return{introduction:"",showToggleBtn:!1,showVideoBrief:!0,load:!1,getDataFlag:!0,data:{},is_buy:!1,showInviter:!1,ac_id:0,from_user_id:0}},created:function(){this.$shareConfig();var t=this.getUrlParam("ac_id"),e=this.getUrlParam("from_user_id");console.log(n(t)),console.log(n(e)),t&&e&&this.$store.commit("setDistributionInfo",{ac_id:t,from_user_id:e}),this.$store.state.distributionInfo.ac_id&&this.$store.state.distributionInfo.from_user_id?this.getData():this.$router.push("/errorPage"),t&&e&&(this.ac_id=t,this.from_user_id=e,this.showInviter=!0)},methods:{closeDialog:function(){this.showInviter=!1},getUrlParam:function(t){for(var e=window.location.search.substr(1).split("&"),i=0;i<e.length;i++)if(e[i].split("=")[0]==t)return e[i].split("=")[1];return!1},getData:function(){var t=this;if(this.load=!0,this.getDataFlag){this.getDataFlag=!1;var e={ac_id:this.$store.state.distributionInfo.ac_id,user_id:this.$store.state.WXUserInfo.id?this.$store.state.WXUserInfo.id:""};Object(s["d"])(e).then((function(e){console.log(e),t.data=e,t.introduction=e.introduction,t.is_buy=e.is_buy,t.load=!1,t.getDataFlag=!0}))}},WXPay:function(){var t=this;if(this.$store.state.appUserInfo.token)if(this.$store.state.WXUserInfo.id){var e={ac_id:this.$store.state.distributionInfo.ac_id,from_user_id:this.$store.state.distributionInfo.from_user_id,user_id:this.$store.state.WXUserInfo.id,openid:this.$store.state.WXUserInfo.open_id};Object(s["j"])(e).then((function(e){console.log(e),t.$payConfig(e.timeStamp,e.nonceStr,e.package,e.signType,e.paySign,(function(t){alert(t),alert("支付成功"),this.$router.push({name:"payResult",query:{result:!0}})}),(function(t){alert(t),alert("支付失败"),this.$router.push({name:"payResult",query:{result:!1}})}))}))}else{var i=encodeURI(window.location.origin+this.$route.path);location.replace("https://app.newtiming.com/api/v1/socials/authorizations?redirect_url="+i+"&user_id="+this.$store.state.appUserInfo.id)}else this.$router.push("/login")},toUser:function(){this.$router.push({name:"personalCenter"})},toShare:function(){this.$router.push({name:"share"})},handleWeappError:function(){console.log("跳转失败")},handleWeappLaunch:function(){console.log("跳转成功")},changeBrief:function(){this.showVideoBrief=!this.showVideoBrief}},watch:{introduction:function(){this.$nextTick((function(){var t=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).height),e=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).lineHeight);console.log(t,e),t>3*e?(console.log(1),this.showToggleBtn=!0):(console.log(2),this.showToggleBtn=!1)}))}}},v=p,m=(i("48f5"),Object(d["a"])(v,o,a,!1,null,"1213a100",null));e["default"]=m.exports},"2bf4":function(t,e,i){t.exports=i.p+"img/distributionRule.8637c404.png"},"2fe9":function(t,e,i){},"3ca3":function(t,e,i){"use strict";var o=i("6547").charAt,a=i("69f3"),n=i("7dd0"),s="String Iterator",r=a.set,c=a.getterFor(s);n(String,"String",(function(t){r(this,{type:s,string:String(t),index:0})}),(function(){var t,e=c(this),i=e.string,a=e.index;return a>=i.length?{value:void 0,done:!0}:(t=o(i,a),e.index+=t.length,{value:t,done:!1})}))},"48f5":function(t,e,i){"use strict";var o=i("fedb"),a=i.n(o);a.a},"746f":function(t,e,i){var o=i("428f"),a=i("5135"),n=i("e538"),s=i("9bf2").f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});a(e,t)||s(e,t,{value:n.f(t)})}},"8e0a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"toHome"},on:{click:t.toPages}},["detail"==t.toWhere?i("i",{staticClass:"iconfont icon-iconfontshangchengweijihuoeps"}):t._e(),"personalCenter"==t.toWhere?i("i",{staticClass:"iconfont icon-shouye1 toDetail"}):t._e(),"personalCenter"==t.toWhere?i("p",[t._v("个人中心")]):t._e(),"detail"==t.toWhere?i("p",[t._v("返回")]):t._e()])},a=[],n={name:"toHome",props:["toWhere"],methods:{toPages:function(){this.$router.push(this.toWhere)}}},s=n,r=(i("a6be"),i("2877")),c=Object(r["a"])(s,o,a,!1,null,"1da08a80",null);e["a"]=c.exports},"99a1":function(t,e,i){},a4d3:function(t,e,i){"use strict";var o=i("23e7"),a=i("da84"),n=i("d066"),s=i("c430"),r=i("83ab"),c=i("4930"),l=i("fdbf"),u=i("d039"),f=i("5135"),d=i("e8b5"),g=i("861d"),h=i("825a"),p=i("7b0b"),v=i("fc6a"),m=i("c04e"),_=i("5c6c"),b=i("7c73"),y=i("df75"),C=i("241c"),w=i("057f"),S=i("7418"),$=i("06cf"),D=i("9bf2"),k=i("d1e7"),x=i("9112"),B=i("6eeb"),I=i("5692"),T=i("f772"),L=i("d012"),O=i("90e3"),F=i("b622"),P=i("e538"),W=i("746f"),j=i("d44e"),U=i("69f3"),V=i("b727").forEach,R=T("hidden"),E="Symbol",M="prototype",N=F("toPrimitive"),H=U.set,X=U.getterFor(E),G=Object[M],q=a.Symbol,A=n("JSON","stringify"),J=$.f,K=D.f,z=w.f,Q=k.f,Y=I("symbols"),Z=I("op-symbols"),tt=I("string-to-symbol-registry"),et=I("symbol-to-string-registry"),it=I("wks"),ot=a.QObject,at=!ot||!ot[M]||!ot[M].findChild,nt=r&&u((function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,i){var o=J(G,e);o&&delete G[e],K(t,e,i),o&&t!==G&&K(G,e,o)}:K,st=function(t,e){var i=Y[t]=b(q[M]);return H(i,{type:E,tag:t,description:e}),r||(i.description=e),i},rt=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof q},ct=function(t,e,i){t===G&&ct(Z,e,i),h(t);var o=m(e,!0);return h(i),f(Y,o)?(i.enumerable?(f(t,R)&&t[R][o]&&(t[R][o]=!1),i=b(i,{enumerable:_(0,!1)})):(f(t,R)||K(t,R,_(1,{})),t[R][o]=!0),nt(t,o,i)):K(t,o,i)},lt=function(t,e){h(t);var i=v(e),o=y(i).concat(ht(i));return V(o,(function(e){r&&!ft.call(i,e)||ct(t,e,i[e])})),t},ut=function(t,e){return void 0===e?b(t):lt(b(t),e)},ft=function(t){var e=m(t,!0),i=Q.call(this,e);return!(this===G&&f(Y,e)&&!f(Z,e))&&(!(i||!f(this,e)||!f(Y,e)||f(this,R)&&this[R][e])||i)},dt=function(t,e){var i=v(t),o=m(e,!0);if(i!==G||!f(Y,o)||f(Z,o)){var a=J(i,o);return!a||!f(Y,o)||f(i,R)&&i[R][o]||(a.enumerable=!0),a}},gt=function(t){var e=z(v(t)),i=[];return V(e,(function(t){f(Y,t)||f(L,t)||i.push(t)})),i},ht=function(t){var e=t===G,i=z(e?Z:v(t)),o=[];return V(i,(function(t){!f(Y,t)||e&&!f(G,t)||o.push(Y[t])})),o};if(c||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=O(t),i=function(t){this===G&&i.call(Z,t),f(this,R)&&f(this[R],e)&&(this[R][e]=!1),nt(this,e,_(1,t))};return r&&at&&nt(G,e,{configurable:!0,set:i}),st(e,t)},B(q[M],"toString",(function(){return X(this).tag})),B(q,"withoutSetter",(function(t){return st(O(t),t)})),k.f=ft,D.f=ct,$.f=dt,C.f=w.f=gt,S.f=ht,P.f=function(t){return st(F(t),t)},r&&(K(q[M],"description",{configurable:!0,get:function(){return X(this).description}}),s||B(G,"propertyIsEnumerable",ft,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:q}),V(y(it),(function(t){W(t)})),o({target:E,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var i=q(e);return tt[e]=i,et[i]=e,i},keyFor:function(t){if(!rt(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!r},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:gt,getOwnPropertySymbols:ht}),o({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(p(t))}}),A){var pt=!c||u((function(){var t=q();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))}));o({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,i){var o,a=[t],n=1;while(arguments.length>n)a.push(arguments[n++]);if(o=e,(g(e)||void 0!==t)&&!rt(t))return d(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!rt(e))return e}),a[1]=e,A.apply(null,a)}})}q[M][N]||x(q[M],N,q[M].valueOf),j(q,E),L[R]=!0},a6be:function(t,e,i){"use strict";var o=i("2fe9"),a=i.n(o);a.a},d28b:function(t,e,i){var o=i("746f");o("iterator")},ddb0:function(t,e,i){var o=i("da84"),a=i("fdbc"),n=i("e260"),s=i("9112"),r=i("b622"),c=r("iterator"),l=r("toStringTag"),u=n.values;for(var f in a){var d=o[f],g=d&&d.prototype;if(g){if(g[c]!==u)try{s(g,c,u)}catch(p){g[c]=u}if(g[l]||s(g,l,f),a[f])for(var h in n)if(g[h]!==n[h])try{s(g,h,n[h])}catch(p){g[h]=n[h]}}}},e01a:function(t,e,i){"use strict";var o=i("23e7"),a=i("83ab"),n=i("da84"),s=i("5135"),r=i("861d"),c=i("9bf2").f,l=i("e893"),u=n.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};l(d,u);var g=d.prototype=u.prototype;g.constructor=d;var h=g.toString,p="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;c(g,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=h.call(t);if(s(f,t))return"";var i=p?e.slice(7,-1):e.replace(v,"$1");return""===i?void 0:i}}),o({global:!0,forced:!0},{Symbol:d})}},e538:function(t,e,i){var o=i("b622");e.f=o},e548:function(t,e,i){"use strict";var o=i("99a1"),a=i.n(o);a.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fedb:function(t,e,i){}}]);
//# sourceMappingURL=chunk-271a89ae.71dbb1eb.js.map