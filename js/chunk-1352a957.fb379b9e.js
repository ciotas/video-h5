(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1352a957"],{1e3:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"detail"}},[s("van-overlay",{staticClass:"loadBox",attrs:{show:t.load,"z-index":1e4,"lock-scroll":!0}},[t.load?s("van-loading",{staticClass:"load",attrs:{type:"spinner",color:"#1989fa",vertical:!0}}):t._e()],1),s("div",{staticClass:"content"},[s("div",{staticClass:"imgBox"},[s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3}},t._l(t.data.acImages,(function(t,i){return s("van-swipe-item",{key:i},[s("img",{attrs:{src:t,alt:""}})])})),1)],1),s("div",{staticClass:"videoBaseInfo"},[s("div",{staticClass:"videoTitle"},[s("p",{staticClass:"videoName"},[t._v(t._s(t.data.name))]),s("p",{staticClass:"videoSort"},t._l(t.data.tags,(function(i,e){return s("span",{key:e},[0!==e?s("span",[t._v("/")]):t._e(),t._v(" "+t._s(i)+" ")])})),0)]),s("div",{staticClass:"videoBrief"},[s("div",{class:{shrink:t.showToggleBtn&&t.showVideoBrief}},[s("div",{ref:"videoBriefText",staticClass:"videoBriefText",domProps:{innerHTML:t._s(t.introduction)}}),t.showToggleBtn&&t.showVideoBrief?s("div",{staticClass:"ellipsis"},[t._v("...")]):t._e()]),t.showToggleBtn?s("p",{staticClass:"changeBrief",on:{click:t.changeBrief}},[t._v(t._s(t.showVideoBrief?"展开":"收起"))]):t._e()]),s("div",{staticClass:"videoCom"},[s("div",{staticClass:"comLogo"},[s("img",{attrs:{src:t.data.logo,alt:""}})]),s("p",[t._v(t._s(t.data.studio_name))])]),s("div",{staticClass:"videoDetail",domProps:{innerHTML:t._s(t.data.intro)}}),s("div",{staticClass:"videoBuy"},[s("div",{staticClass:"toUser",on:{click:t.toUser}},[s("i",{staticClass:"iconfont icon-wode"}),s("span",[t._v("个人中心")])]),s("div",{staticClass:"buyBtn",on:{click:t.WXPay}},[t._v(" 抢购价￥ "),s("span",[t._v(t._s(t._f("moneyFormatType")(t.data.price)))])])]),s("div",{staticClass:"shareBtn",on:{click:t.toShare}},[t._v(" 分享赚￥ "),s("span",[t._v(t._s(t._f("moneyFormatType")(t.data.price*t.data.rate/100)))])])])])],1)},a=[],o=(s("ac1f"),s("841c"),s("1276"),s("0a14")),n={data:function(){return{introduction:"",showToggleBtn:!1,showVideoBrief:!0,load:!1,getDataFlag:!0,data:{}}},created:function(){var t=this.getUrlParam("ac_id"),i=this.getUrlParam("from_user_id");this.$store.commit("setDistributionInfo",{ac_id:t,from_user_id:i}),this.getData()},mounted:function(){},methods:{getUrlParam:function(t){for(var i=window.location.search.substr(1).split("&"),s=0;s<i.length;s++)if(i[s].split("=")[0]==t)return i[s].split("=")[1];return!1},getData:function(){var t=this;if(this.load=!0,this.getDataFlag){this.getDataFlag=!1;var i={ac_id:1,user_id:this.$store.state.WXUserInfo.id?this.$store.state.WXUserInfo.id:""};Object(o["c"])(i).then((function(i){console.log(i),t.data=i,t.introduction=i.introduction,t.load=!1,t.getDataFlag=!0}))}},WXPay:function(){if(this.$store.state.WXUserInfo.id&&this.$store.state.appUserInfo.token){var t="https://app.newtiming.com/api/v1/activity/wechat/pay/buy/program?ac_id=1&from_user_id="+this.$store.state.WXUserInfo.id+"&user_id="+this.$store.state.WXUserInfo.id+"&openid="+this.$store.state.WXUserInfo.open_id;window.location.href=t}else this.$router.push("/login")},toUser:function(){this.$router.push({name:"personalCenter"})},toShare:function(){this.$router.push({name:"share"})},changeBrief:function(){this.showVideoBrief=!this.showVideoBrief}},watch:{introduction:function(){this.$nextTick((function(){var t=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).height),i=parseFloat(window.getComputedStyle(this.$refs.videoBriefText).lineHeight);console.log(t,i),t>3*i?(console.log(1),this.showToggleBtn=!0):(console.log(2),this.showToggleBtn=!1)}))}}},r=n,c=(s("dc97"),s("2877")),d=Object(c["a"])(r,e,a,!1,null,"634cbce6",null);i["default"]=d.exports},"129f":function(t,i){t.exports=Object.is||function(t,i){return t===i?0!==t||1/t===1/i:t!=t&&i!=i}},"841c":function(t,i,s){"use strict";var e=s("d784"),a=s("825a"),o=s("1d80"),n=s("129f"),r=s("14c3");e("search",1,(function(t,i,s){return[function(i){var s=o(this),e=void 0==i?void 0:i[t];return void 0!==e?e.call(i,s):new RegExp(i)[t](String(s))},function(t){var e=s(i,t,this);if(e.done)return e.value;var o=a(t),c=String(this),d=o.lastIndex;n(d,0)||(o.lastIndex=0);var l=r(o,c);return n(o.lastIndex,d)||(o.lastIndex=d),null===l?-1:l.index}]}))},"9d36":function(t,i,s){},dc97:function(t,i,s){"use strict";var e=s("9d36"),a=s.n(e);a.a}}]);
//# sourceMappingURL=chunk-1352a957.fb379b9e.js.map